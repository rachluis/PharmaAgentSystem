# 本科毕业设计详细开发计划：基于多智能体的医药市场画像与策略生成系统

## 1. 项目目标

构建一个 B/S 架构的智能分析平台，实现以下核心功能：

1. **数据清洗与特征工程** ：处理大规模医药销售/处方数据。
2. **医生分群画像** ：利用 K-Means 算法对医生进行科学分层（如：高价值、潜力、低频等）。
3. **AI 策略报告** ：结合 Dify (LLM) 针对不同医生群体自动生成个性化的市场推广策略报告。
4. **交互式可视化** ：通过现代化 Web 界面展示分析结果。

## 2. 阶段一：数据探索与模型验证 (预计耗时：3-5天)

 **目标** ：确定哪些字段有用，跑通算法原型，不涉及 Web 开发。

* **Step 1.1 数据体检** ：运行 Python 脚本分析源数据（字段类型、缺失值、分布情况）。
* **Step 1.2 特征工程 (Feature Engineering)** ：
* 确定用于聚类的关键指标（如：RFM 模型 - 最近一次处方时间 Recency、处方频率 Frequency、处方金额 Monetary）。
* 清洗数据（填充缺失值、去除异常值）。
* 标准化数据（StandardScaler）。
* **Step 1.3 算法验证 (Jupyter/Script)** ：
* 使用 `sklearn` 运行 K-Means。
* 使用“肘部法则” (Elbow Method) 或 轮廓系数 确定最佳的 $K$ 值。
* 保存处理后的“清洗版数据”和“聚类模型/中心点”备用。

## 3. 阶段二：系统架构搭建 (预计耗时：2-3天)

 **目标** ：搭建前后端骨架，实现“Hello World”级别的连通。

* **Step 2.1 后端初始化 (Python FastAPI)** ：
* 设计目录结构。
* 配置虚拟环境与依赖 (`requirements.txt`)。
* 搭建数据库 (SQLite)，设计 `Doctor` (医生表) 和 `AnalysisResult` (分析结果表)。
* **Step 2.2 前端初始化 (Vue3 + TS + Vite)** ：
* 引入 Element Plus 或 Naive UI 组件库。
* 配置 Axios 请求拦截器。
* 搭建基础布局 (Layout)：侧边栏导航 + 内容区域。

## 4. 阶段三：核心功能开发 (预计耗时：7-10天)

 **目标** ：实现从“上传文件”到“看到图表”的完整链路。

* **Step 3.1 数据上传与处理模块** ：
* 后端：编写文件上传接口，集成阶段一写好的“清洗与入库”逻辑。
* 前端：上传组件，展示上传进度。
* **Step 3.2 医生画像分析模块** ：
* 后端：编写“执行聚类”接口，接收参数 $K$，返回聚类结果（JSON）。
* 前端：使用 ECharts 绘制散点图（展示分布）和雷达图（展示各类别的特征偏好）。
* **Step 3.3 详情展示** ：
* 点击某个聚类，展示该类别的医生列表及详细统计指标。

## 5. 阶段四：AI Agent 集成 (Dify 工作流) (预计耗时：5-7天)

 **目标** ：让 AI “看懂”聚类结果并写报告。

* **Step 4.1 Dify 平台配置** ：
* 搭建/配置 Dify 本地或云端环境。
* 设计 Workflow：输入变量为 `cluster_features` (JSON) -> LLM 节点 (提示词编写) -> 输出 Markdown 报告。
* **Step 4.2 接口对接** ：
* 后端：封装调用 Dify API 的函数。
* 前端：聊天/报告生成界面，支持流式输出 (打字机效果) 和 Markdown 渲染。

## 6. 阶段五：UI 美化与论文写作同步 (持续进行)

 **目标** ：提升系统颜值，完成论文初稿。

* **Step 5.1 UI 优化** ：统一配色（建议医疗蓝/科技白），增加 Loading 动画，优化交互反馈。
* **Step 5.2 论文填充** ：
* 将阶段一的分析过程写入《第5章 数据处理》。
* 将阶段三的 ECharts 图截图写入《第5章 画像解读》。
* 将阶段四的 Prompt 和工作流截图写入《第6章 系统实现》。

## 7. 附录：技术栈确认

* **IDE** : VS Code (配合 Cursor)
* **后端** : Python 3.9+, FastAPI, Pandas, Scikit-learn
* **前端** : Vue 3, TypeScript, Vite, Element Plus, ECharts
* **AI** : Dify (LLM Ops), Gemini/GPT (底层模型)
* **DB** : SQLite (轻量级，适合毕设)
